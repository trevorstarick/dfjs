!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){"use strict";window.Settings={},window.QueryString=function(){for(var a={},b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if("undefined"==typeof a[e[0]])a[e[0]]=e[1];else if("string"==typeof a[e[0]]){var f=[a[e[0]],e[1]];a[e[0]]=f}else a[e[0]].push(e[1])}return a}();var b=a("./core/game.js");Settings={tick:200,size:Math.ceil(window.innerWidth/80),maxSize:8,width:80,height:45},Settings.updateSize=function(){Settings.size=Math.ceil(window.innerWidth/80),b.canvas.width=Settings.size*Settings.width,b.canvas.height=Settings.size*Settings.height,console.log("Size updated...",Settings.size)},window.document.title+=" "+Settings.seed,console.log("%c%c background: #222; color: #bada55","background: #222; color: #bada55"),b.start()},{"./core/game.js":3}],2:[function(a,b){"use strict";function c(a,b){return Math.floor(Math.random()*(b-a+1))+a}var d={};d.createNew=function(a,b,c){var d=Object.keys(Game.entityMap).length,e=b[0],f=b[1];return-1===Game.map[e][f]?(a.coordinates=[e,f],Game.entityMap[d]=a,Game.map[e][f]=d,c(d)):c(!1)},d.remove=function(a){var b=a[0],c=a[1];if(-1!==Game.map[b][c]){var d=Game.map[b][c];console.log("removed",d,[b,c]),Game.entityMap[d]={deleted:!0},Game.map[b][c]=-1}},d.spawn=function(a,b){function e(a){a&&(f+=1)}b=b||{};for(var f=0;1>f;){var g=c(0,79),h=c(0,44);d.createNew({type:a,data:b},[g,h],e)}},d.populate=function(a,b,e){function f(a){a&&(g+=1)}for(var g=0;e>g;){var h=c(0,79),i=c(0,44);d.createNew({type:a,data:b},[h,i],f)}},d.MoveLeft=function(a){this.MoveEntity(-1,0,a)},d.MoveUp=function(a){this.MoveEntity(0,-1,a)},d.MoveRight=function(a){this.MoveEntity(1,0,a)},d.MoveDown=function(a){this.MoveEntity(0,1,a)},d.MoveEntity=function(a,b,c){if(Game._interval&&"paused"!==Game.status){var d=Game.entityMap[c],e=d.coordinates;Game.map[e[0]][e[1]]=-1;var f=Game.map[e[0]+a][e[1]+b];console.log(f,Game.entityMap[f]),console.log(e),0<=e[0]+a&&0<=e[1]+b&&(-1===f||"block"!==Game.entityMap[f].type)&&(f=c,d.coordinates=[e[0]+a,e[1]+b])}},b.exports=d},{}],3:[function(a,b){"use strict";window.Game={};var c=a("./map.js"),d=a("./entities.js"),e=a("./seedrandom.js");Game={map:[],entityMap:{},version:1,state:"paused",seed:Math.ceil(Math.random()*Date.now()).toString(36).substring(0,8),selected:"block"},Game.init=function(){function a(a){var b=a.x,c=a.y;b-=Game.canvas.offsetLeft,c-=Game.canvas.offsetTop;var d=[Math.floor(b/Settings.size),Math.floor(c/Settings.size)];return console.log(a.type,[b,c],d),d}this.loops=0,e(this.seed,{global:!0}),Settings.size>Settings.maxSize&&(Settings.size=Settings.maxSize),Game.canvas=document.getElementById("game"),Game.canvas.width=Settings.size*Settings.width,Game.canvas.height=Settings.size*Settings.height,Game.ctx=Game.canvas.getContext("2d"),Game.canvas.addEventListener("mousedown",function(b){b.preventDefault();var c=a(b);d.createNew({type:Game.selected,data:{},coordinates:c},c,function(a){a?console.log("created",a,c):console.log("unable to create")})},!1),Game.canvas.oncontextmenu=function(b){b.preventDefault();var c=a(b),e=c[0],f=c[1];d.remove([e,f])},$(document).keydown(function(a){switch(a.keyCode){case 37:d.MoveLeft(0);break;case 38:d.MoveUp(0);break;case 39:d.MoveRight(0);break;case 40:d.MoveDown(0)}}),c.init(),d.spawn("player"),d.populate("liquid",{},10),d.populate("beast",{},7),d.populate("npc",{},15),d.populate("block",{},100),console.log("Game initialized...")},Game.update=function(){window.stats.update()},Game.draw=function(){var a=Object.keys(Game.entityMap).length,b=Settings.size;Game.canvas.width=Game.canvas.width;for(var c=0;a>c;c++){var d=Game.entityMap[c];if(!d.deleted){var e=d.coordinates[0],f=d.coordinates[1],g=d.type;switch(g){case"player":Game.ctx.fillStyle="rgba(255,255, 255, 1)";break;case"npc":Game.ctx.fillStyle="rgba(0, 255, 0, 1)";break;case"beast":Game.ctx.fillStyle="rgba(255, 0, 0, 1)";break;case"liquid":Game.ctx.fillStyle="rgba(0, 0, 255, 1)";break;default:Game.ctx.fillStyle="rgba(128, 128, 128, 1)"}Game.ctx.fillRect(e*b,f*b,1*b,1*b)}}},Game.pause=function(){Game.state="paused",console.log(Game.state),clearInterval(Game._interval)},Game.resume=function(){Game.state="running",console.log(Game.state),Game._interval=setInterval(Game.run,1e3/Settings.tick)},Game.start=function(){Game.state="running",console.log(Game.state),Game._interval=setInterval(Game.run,1e3/Settings.tick)},Game.clearScreen=function(){Game.canvas.width=Game.canvas.width,clearInterval(Game._interval),Game.map=[],Game.entityMap={}},Game.reset=function(){Game.canvas.width=Game.canvas.width,Game.map=[],Game.entityMap={},Game.start()},Game.run=function(){Game.map.length?(Game.update(),Game.draw()):Game.init()},b.exports=Game},{"./entities.js":2,"./map.js":4,"./seedrandom.js":5}],4:[function(a,b){"use strict";var c=function(){this.initialized=!1};c.prototype={init:function(){for(var a=0;79>=a;a++){for(var b=[],c=0;44>=c;c++)b.push(-1);Game.map.push(b)}this.initialized=!0,console.log("Map initialized...")},span:function(a,b){Game.map;switch(a){case"up":a=[0,-b];break;case"down":a=[0,b];break;case"left":a=[-b,0];break;case"right":a=[b,0]}console.log(a)}},b.exports=new c},{}],5:[function(a,b){!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\x00"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[];f=1==f?{entropy:!0}:f||{};var r=l(k(f.entropy?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(f.pass||g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,"global"in f?f.global:this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof b&&b,"function"==typeof define&&define,"random")},{}]},{},[1]);