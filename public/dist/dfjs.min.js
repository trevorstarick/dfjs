!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(d){!function(a){if("function"==typeof bootstrap)bootstrap("pf",a);else if("object"==typeof c)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makePF=a}else"undefined"!=typeof window?window.PF=a():d.PF=a()}(function(){return function(b,c,d){function e(d,g){if(!c[d]){if(!b[d]){var h="function"==typeof a&&a;if(!g&&h)return h(d,!0);if(f)return f(d,!0);throw new Error("Cannot find module '"+d+"'")}var i=c[d]={exports:{}};b[d][0].call(i.exports,function(a){var c=b[d][1][a];return e(c?c:a)},i,i.exports)}return c[d].exports}for(var f="function"==typeof a&&a,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports=a("./lib/heap")},{"./lib/heap":2}],2:[function(a,b){!function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p;d=Math.floor,k=Math.min,c=function(a,b){return b>a?-1:a>b?1:0},j=function(a,b,e,f,g){var h;if(null==e&&(e=0),null==g&&(g=c),0>e)throw new Error("lo must be non-negative");for(null==f&&(f=a.length);f>e;)h=d((e+f)/2),g(b,a[h])<0?f=h:e=h+1;return[].splice.apply(a,[e,e-e].concat(b)),b},g=function(a,b,d){return null==d&&(d=c),a.push(b),o(a,0,a.length-1,d)},f=function(a,b){var d,e;return null==b&&(b=c),d=a.pop(),a.length?(e=a[0],a[0]=d,p(a,0,b)):e=d,e},i=function(a,b,d){var e;return null==d&&(d=c),e=a[0],a[0]=b,p(a,0,d),e},h=function(a,b,d){var e;return null==d&&(d=c),a.length&&d(a[0],b)<0&&(e=[a[0],b],b=e[0],a[0]=e[1],p(a,0,d)),b},e=function(a,b){var e,f,g,h,i,j;for(null==b&&(b=c),h=function(){j=[];for(var b=0,c=d(a.length/2);c>=0?c>b:b>c;c>=0?b++:b--)j.push(b);return j}.apply(this).reverse(),i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(p(a,e,b));return i},n=function(a,b,d){var e;return null==d&&(d=c),e=a.indexOf(b),-1!==e?(o(a,0,e,d),p(a,e,d)):void 0},l=function(a,b,d){var f,g,i,j,k;if(null==d&&(d=c),g=a.slice(0,b),!g.length)return g;for(e(g,d),k=a.slice(b),i=0,j=k.length;j>i;i++)f=k[i],h(g,f,d);return g.sort(d).reverse()},m=function(a,b,d){var g,h,i,l,m,n,o,p,q,r;if(null==d&&(d=c),10*b<=a.length){if(l=a.slice(0,b).sort(d),!l.length)return l;for(i=l[l.length-1],p=a.slice(b),m=0,o=p.length;o>m;m++)g=p[m],d(g,i)<0&&(j(l,g,0,null,d),l.pop(),i=l[l.length-1]);return l}for(e(a,d),r=[],h=n=0,q=k(b,a.length);q>=0?q>n:n>q;h=q>=0?++n:--n)r.push(f(a,d));return r},o=function(a,b,d,e){var f,g,h;for(null==e&&(e=c),f=a[d];d>b&&(h=d-1>>1,g=a[h],e(f,g)<0);)a[d]=g,d=h;return a[d]=f},p=function(a,b,d){var e,f,g,h,i;for(null==d&&(d=c),f=a.length,i=b,g=a[b],e=2*b+1;f>e;)h=e+1,f>h&&!(d(a[e],a[h])<0)&&(e=h),a[b]=a[e],b=e,e=2*b+1;return a[b]=g,o(a,i,b,d)},a=function(){function a(a){this.cmp=null!=a?a:c,this.nodes=[]}return a.push=g,a.pop=f,a.replace=i,a.pushpop=h,a.heapify=e,a.nlargest=l,a.nsmallest=m,a.prototype.push=function(a){return g(this.nodes,a,this.cmp)},a.prototype.pop=function(){return f(this.nodes,this.cmp)},a.prototype.peek=function(){return this.nodes[0]},a.prototype.contains=function(a){return-1!==this.nodes.indexOf(a)},a.prototype.replace=function(a){return i(this.nodes,a,this.cmp)},a.prototype.pushpop=function(a){return h(this.nodes,a,this.cmp)},a.prototype.heapify=function(){return e(this.nodes,this.cmp)},a.prototype.updateItem=function(a){return n(this.nodes,a,this.cmp)},a.prototype.clear=function(){return this.nodes=[]},a.prototype.empty=function(){return 0===this.nodes.length},a.prototype.size=function(){return this.nodes.length},a.prototype.clone=function(){var b;return b=new a,b.nodes=this.nodes.slice(0),b},a.prototype.toArray=function(){return this.nodes.slice(0)},a.prototype.insert=a.prototype.push,a.prototype.remove=a.prototype.pop,a.prototype.top=a.prototype.peek,a.prototype.front=a.prototype.peek,a.prototype.has=a.prototype.contains,a.prototype.copy=a.prototype.clone,a}(),("undefined"!=typeof b&&null!==b?b.exports:void 0)?b.exports=a:window.Heap=a}.call(this)},{}],3:[function(a,b){b.exports={Heap:a("heap"),Node:a("./core/Node"),Grid:a("./core/Grid"),Util:a("./core/Util"),Heuristic:a("./core/Heuristic"),AStarFinder:a("./finders/AStarFinder"),BestFirstFinder:a("./finders/BestFirstFinder"),BreadthFirstFinder:a("./finders/BreadthFirstFinder"),DijkstraFinder:a("./finders/DijkstraFinder"),BiAStarFinder:a("./finders/BiAStarFinder"),BiBestFirstFinder:a("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:a("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:a("./finders/BiDijkstraFinder"),IDAStarFinder:a("./finders/IDAStarFinder"),JumpPointFinder:a("./finders/JumpPointFinder"),OrthogonalJumpPointFinder:a("./finders/OrthogonalJumpPointFinder"),TraceFinder:a("./finders/TraceFinder")}},{"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":8,"./finders/BestFirstFinder":9,"./finders/BiAStarFinder":10,"./finders/BiBestFirstFinder":11,"./finders/BiBreadthFirstFinder":12,"./finders/BiDijkstraFinder":13,"./finders/BreadthFirstFinder":14,"./finders/DijkstraFinder":15,"./finders/IDAStarFinder":16,"./finders/JumpPointFinder":17,"./finders/OrthogonalJumpPointFinder":18,"./finders/TraceFinder":19,heap:1}],4:[function(a,b){function c(a,b,c){this.width=a,this.height=b,this.nodes=this._buildNodes(a,b,c)}var d=a("./Node");c.prototype._buildNodes=function(a,b,c){var e,f,g=new Array(b);for(e=0;b>e;++e)for(g[e]=new Array(a),f=0;a>f;++f)g[e][f]=new d(f,e);if(void 0===c)return g;if(c.length!==b||c[0].length!==a)throw new Error("Matrix size does not fit");for(e=0;b>e;++e)for(f=0;a>f;++f)c[e][f]&&(g[e][f].walkable=!1);return g},c.prototype.getNodeAt=function(a,b){return this.nodes[b][a]},c.prototype.isWalkableAt=function(a,b){return this.isInside(a,b)&&this.nodes[b][a].walkable},c.prototype.isInside=function(a,b){return a>=0&&a<this.width&&b>=0&&b<this.height},c.prototype.setWalkableAt=function(a,b,c){this.nodes[b][a].walkable=c},c.prototype.getNeighbors=function(a,b,c){var d=a.x,e=a.y,f=[],g=!1,h=!1,i=!1,j=!1,k=!1,l=!1,m=!1,n=!1,o=this.nodes;return this.isWalkableAt(d,e-1)&&(f.push(o[e-1][d]),g=!0),this.isWalkableAt(d+1,e)&&(f.push(o[e][d+1]),i=!0),this.isWalkableAt(d,e+1)&&(f.push(o[e+1][d]),k=!0),this.isWalkableAt(d-1,e)&&(f.push(o[e][d-1]),m=!0),b?(c?(h=m&&g,j=g&&i,l=i&&k,n=k&&m):(h=m||g,j=g||i,l=i||k,n=k||m),h&&this.isWalkableAt(d-1,e-1)&&f.push(o[e-1][d-1]),j&&this.isWalkableAt(d+1,e-1)&&f.push(o[e-1][d+1]),l&&this.isWalkableAt(d+1,e+1)&&f.push(o[e+1][d+1]),n&&this.isWalkableAt(d-1,e+1)&&f.push(o[e+1][d-1]),f):f},c.prototype.clone=function(){var a,b,e=this.width,f=this.height,g=this.nodes,h=new c(e,f),i=new Array(f);for(a=0;f>a;++a)for(i[a]=new Array(e),b=0;e>b;++b)i[a][b]=new d(b,a,g[a][b].walkable);return h.nodes=i,h},b.exports=c},{"./Node":6}],5:[function(a,b){b.exports={manhattan:function(a,b){return a+b},euclidean:function(a,b){return Math.sqrt(a*a+b*b)},chebyshev:function(a,b){return Math.max(a,b)}}},{}],6:[function(a,b){function c(a,b,c){this.x=a,this.y=b,this.walkable=void 0===c?!0:c}b.exports=c},{}],7:[function(a,b,c){function d(a){for(var b=[[a.x,a.y]];a.parent;)a=a.parent,b.push([a.x,a.y]);return b.reverse()}function e(a,b){var c=d(a),e=d(b);return c.concat(e.reverse())}function f(a){var b,c,d,e,f,g=0;for(b=1;b<a.length;++b)c=a[b-1],d=a[b],e=c[0]-d[0],f=c[1]-d[1],g+=Math.sqrt(e*e+f*f);return g}function g(a,b,c,d){var e,f,g,h,i,j,k=Math.abs,l=[];for(g=k(c-a),h=k(d-b),e=c>a?1:-1,f=d>b?1:-1,i=g-h;l.push([a,b]),a!==c||b!==d;)j=2*i,j>-h&&(i-=h,a+=e),g>j&&(i+=g,b+=f);return l}function h(a){var b,c,d,e,f,h,i=[],j=a.length;if(2>j)return i;for(f=0;j-1>f;++f)for(b=a[f],c=a[f+1],d=g(b[0],b[1],c[0],c[1]),e=d.length,h=0;e-1>h;++h)i.push(d[h]);return i.push(a[j-1]),i}function i(a,b){var c,d,e,f,h,i,j,k,l,m,n,o,p,q=b.length,r=b[0][0],s=b[0][1],t=b[q-1][0],u=b[q-1][1];for(c=r,d=s,h=b[1][0],i=b[1][1],j=[[c,d]],k=2;q>k;++k){for(m=b[k],e=m[0],f=m[1],n=g(c,d,e,f),p=!1,l=1;l<n.length;++l)if(o=n[l],!a.isWalkableAt(o[0],o[1])){p=!0,j.push([h,i]),c=h,d=i;break}p||(h=e,i=f)}return j.push([t,u]),j}function j(a){if(a.length<3)return a;var b,c,d,e,f,g,h=[],i=a[0][0],j=a[0][1],k=a[1][0],l=a[1][1],m=k-i,n=l-j;for(f=Math.sqrt(m*m+n*n),m/=f,n/=f,h.push([i,j]),g=2;g<a.length;g++)b=k,c=l,d=m,e=n,k=a[g][0],l=a[g][1],m=k-b,n=l-c,f=Math.sqrt(m*m+n*n),m/=f,n/=f,(m!==d||n!==e)&&h.push([b,c]);return h.push([k,l]),h}c.backtrace=d,c.biBacktrace=e,c.pathLength=f,c.interpolate=g,c.expandPath=h,c.smoothenPath=i,c.compressPath=j},{}],8:[function(a,b){function c(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners,this.heuristic=a.heuristic||f.manhattan,this.weight=a.weight||1}var d=a("heap"),e=a("../core/Util"),f=a("../core/Heuristic");c.prototype.findPath=function(a,b,c,f,g){var h,i,j,k,l,m,n,o,p=new d(function(a,b){return a.f-b.f}),q=g.getNodeAt(a,b),r=g.getNodeAt(c,f),s=this.heuristic,t=this.allowDiagonal,u=this.dontCrossCorners,v=this.weight,w=Math.abs,x=Math.SQRT2;for(q.g=0,q.f=0,p.push(q),q.opened=!0;!p.empty();){if(h=p.pop(),h.closed=!0,h===r)return e.backtrace(r);for(i=g.getNeighbors(h,t,u),k=0,l=i.length;l>k;++k)j=i[k],j.closed||(m=j.x,n=j.y,o=h.g+(0===m-h.x||0===n-h.y?1:x),(!j.opened||o<j.g)&&(j.g=o,j.h=j.h||v*s(w(m-c),w(n-f)),j.f=j.g+j.h,j.parent=h,j.opened?p.updateItem(j):(p.push(j),j.opened=!0)))}return[]},b.exports=c},{"../core/Heuristic":5,"../core/Util":7,heap:1}],9:[function(a,b){function c(a){d.call(this,a);var b=this.heuristic;this.heuristic=function(a,c){return 1e6*b(a,c)}}var d=a("./AStarFinder");c.prototype=new d,c.prototype.constructor=c,b.exports=c},{"./AStarFinder":8}],10:[function(a,b){function c(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners,this.heuristic=a.heuristic||f.manhattan,this.weight=a.weight||1}var d=a("heap"),e=a("../core/Util"),f=a("../core/Heuristic");c.prototype.findPath=function(a,b,c,f,g){var h,i,j,k,l,m,n,o,p=function(a,b){return a.f-b.f},q=new d(p),r=new d(p),s=g.getNodeAt(a,b),t=g.getNodeAt(c,f),u=this.heuristic,v=this.allowDiagonal,w=this.dontCrossCorners,x=this.weight,y=Math.abs,z=Math.SQRT2,A=1,B=2;for(s.g=0,s.f=0,q.push(s),s.opened=A,t.g=0,t.f=0,r.push(t),t.opened=B;!q.empty()&&!r.empty();){for(h=q.pop(),h.closed=!0,i=g.getNeighbors(h,v,w),k=0,l=i.length;l>k;++k)if(j=i[k],!j.closed){if(j.opened===B)return e.biBacktrace(h,j);m=j.x,n=j.y,o=h.g+(0===m-h.x||0===n-h.y?1:z),(!j.opened||o<j.g)&&(j.g=o,j.h=j.h||x*u(y(m-c),y(n-f)),j.f=j.g+j.h,j.parent=h,j.opened?q.updateItem(j):(q.push(j),j.opened=A))}for(h=r.pop(),h.closed=!0,i=g.getNeighbors(h,v,w),k=0,l=i.length;l>k;++k)if(j=i[k],!j.closed){if(j.opened===A)return e.biBacktrace(j,h);m=j.x,n=j.y,o=h.g+(0===m-h.x||0===n-h.y?1:z),(!j.opened||o<j.g)&&(j.g=o,j.h=j.h||x*u(y(m-a),y(n-b)),j.f=j.g+j.h,j.parent=h,j.opened?r.updateItem(j):(r.push(j),j.opened=B))}}return[]},b.exports=c},{"../core/Heuristic":5,"../core/Util":7,heap:1}],11:[function(a,b){function c(a){d.call(this,a);var b=this.heuristic;this.heuristic=function(a,c){return 1e6*b(a,c)}}var d=a("./BiAStarFinder");c.prototype=new d,c.prototype.constructor=c,b.exports=c},{"./BiAStarFinder":10}],12:[function(a,b){function c(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners}var d=a("../core/Util");c.prototype.findPath=function(a,b,c,e,f){var g,h,i,j,k,l=f.getNodeAt(a,b),m=f.getNodeAt(c,e),n=[],o=[],p=this.allowDiagonal,q=this.dontCrossCorners,r=0,s=1;for(n.push(l),l.opened=!0,l.by=r,o.push(m),m.opened=!0,m.by=s;n.length&&o.length;){for(i=n.shift(),i.closed=!0,g=f.getNeighbors(i,p,q),j=0,k=g.length;k>j;++j)if(h=g[j],!h.closed)if(h.opened){if(h.by===s)return d.biBacktrace(i,h)}else n.push(h),h.parent=i,h.opened=!0,h.by=r;for(i=o.shift(),i.closed=!0,g=f.getNeighbors(i,p,q),j=0,k=g.length;k>j;++j)if(h=g[j],!h.closed)if(h.opened){if(h.by===r)return d.biBacktrace(h,i)}else o.push(h),h.parent=i,h.opened=!0,h.by=s}return[]},b.exports=c},{"../core/Util":7}],13:[function(a,b){function c(a){d.call(this,a),this.heuristic=function(){return 0}}var d=a("./BiAStarFinder");c.prototype=new d,c.prototype.constructor=c,b.exports=c},{"./BiAStarFinder":10}],14:[function(a,b){function c(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners}var d=a("../core/Util");c.prototype.findPath=function(a,b,c,e,f){var g,h,i,j,k,l=[],m=this.allowDiagonal,n=this.dontCrossCorners,o=f.getNodeAt(a,b),p=f.getNodeAt(c,e);for(l.push(o),o.opened=!0;l.length;){if(i=l.shift(),i.closed=!0,i===p)return d.backtrace(p);for(g=f.getNeighbors(i,m,n),j=0,k=g.length;k>j;++j)h=g[j],h.closed||h.opened||(l.push(h),h.opened=!0,h.parent=i)}return[]},b.exports=c},{"../core/Util":7}],15:[function(a,b){function c(a){d.call(this,a),this.heuristic=function(){return 0}}var d=a("./AStarFinder");c.prototype=new d,c.prototype.constructor=c,b.exports=c},{"./AStarFinder":8}],16:[function(a,b){function c(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners,this.heuristic=a.heuristic||d.manhattan,this.weight=a.weight||1,this.trackRecursion=a.trackRecursion||!1,this.timeLimit=a.timeLimit||1/0}a("../core/Util");var d=a("../core/Heuristic"),e=a("../core/Node");c.prototype.findPath=function(a,b,c,d,f){var g,h,i,j=0,k=(new Date).getTime(),l=function(a,b){return this.heuristic(Math.abs(b.x-a.x),Math.abs(b.y-a.y))}.bind(this),m=function(a,b){return a.x===b.x||a.y===b.y?1:Math.SQRT2},n=function(a,b,c,d,g){if(j++,this.timeLimit>0&&(new Date).getTime()-k>1e3*this.timeLimit)return 1/0;var h=b+l(a,p)*this.weight;if(h>c)return h;if(a==p)return d[g]=[a.x,a.y],a;var i,o,q,r,s=f.getNeighbors(a,this.allowDiagonal,this.dontCrossCorners);for(q=0,i=1/0;r=s[q];++q){if(this.trackRecursion&&(r.retainCount=r.retainCount+1||1,r.tested!==!0&&(r.tested=!0)),o=n(r,b+m(a,r),c,d,g+1),o instanceof e)return d[g]=[a.x,a.y],o;this.trackRecursion&&0===--r.retainCount&&(r.tested=!1),i>o&&(i=o)}return i}.bind(this),o=f.getNodeAt(a,b),p=f.getNodeAt(c,d),q=l(o,p);for(g=0;!0;++g){if(h=[],i=n(o,0,q,h,0),1/0===i)return[];if(i instanceof e)return h;q=i}return[]},b.exports=c},{"../core/Heuristic":5,"../core/Node":6,"../core/Util":7}],17:[function(a,b){function c(a){a=a||{},this.heuristic=a.heuristic||f.manhattan,this.trackJumpRecursion=a.trackJumpRecursion||!1}var d=a("heap"),e=a("../core/Util"),f=a("../core/Heuristic");c.prototype.findPath=function(a,b,c,f,g){var h,i=this.openList=new d(function(a,b){return a.f-b.f}),j=this.startNode=g.getNodeAt(a,b),k=this.endNode=g.getNodeAt(c,f);for(this.grid=g,j.g=0,j.f=0,i.push(j),j.opened=!0;!i.empty();){if(h=i.pop(),h.closed=!0,h===k)return e.expandPath(e.backtrace(k));this._identifySuccessors(h)}return[]},c.prototype._identifySuccessors=function(a){var b,c,d,e,g,h,i,j,k,l,m=this.grid,n=this.heuristic,o=this.openList,p=this.endNode.x,q=this.endNode.y,r=a.x,s=a.y,t=Math.abs;for(Math.max,b=this._findNeighbors(a),e=0,g=b.length;g>e;++e)if(c=b[e],d=this._jump(c[0],c[1],r,s)){if(h=d[0],i=d[1],l=m.getNodeAt(h,i),l.closed)continue;j=f.euclidean(t(h-r),t(i-s)),k=a.g+j,(!l.opened||k<l.g)&&(l.g=k,l.h=l.h||n(t(h-p),t(i-q)),l.f=l.g+l.h,l.parent=a,l.opened?o.updateItem(l):(o.push(l),l.opened=!0))}},c.prototype._jump=function(a,b,c,d){var e=this.grid,f=a-c,g=b-d;if(!e.isWalkableAt(a,b))return null;if(this.trackJumpRecursion===!0&&(e.getNodeAt(a,b).tested=!0),e.getNodeAt(a,b)===this.endNode)return[a,b];if(0!==f&&0!==g){if(e.isWalkableAt(a-f,b+g)&&!e.isWalkableAt(a-f,b)||e.isWalkableAt(a+f,b-g)&&!e.isWalkableAt(a,b-g))return[a,b]}else if(0!==f){if(e.isWalkableAt(a+f,b+1)&&!e.isWalkableAt(a,b+1)||e.isWalkableAt(a+f,b-1)&&!e.isWalkableAt(a,b-1))return[a,b]}else if(e.isWalkableAt(a+1,b+g)&&!e.isWalkableAt(a+1,b)||e.isWalkableAt(a-1,b+g)&&!e.isWalkableAt(a-1,b))return[a,b];return 0!==f&&0!==g&&(this._jump(a+f,b,a,b)||this._jump(a,b+g,a,b))?[a,b]:e.isWalkableAt(a+f,b)||e.isWalkableAt(a,b+g)?this._jump(a+f,b+g,a,b):null},c.prototype._findNeighbors=function(a){var b,c,d,e,f,g,h,i,j=a.parent,k=a.x,l=a.y,m=this.grid,n=[];if(j)b=j.x,c=j.y,d=(k-b)/Math.max(Math.abs(k-b),1),e=(l-c)/Math.max(Math.abs(l-c),1),0!==d&&0!==e?(m.isWalkableAt(k,l+e)&&n.push([k,l+e]),m.isWalkableAt(k+d,l)&&n.push([k+d,l]),(m.isWalkableAt(k,l+e)||m.isWalkableAt(k+d,l))&&n.push([k+d,l+e]),!m.isWalkableAt(k-d,l)&&m.isWalkableAt(k,l+e)&&n.push([k-d,l+e]),!m.isWalkableAt(k,l-e)&&m.isWalkableAt(k+d,l)&&n.push([k+d,l-e])):0===d?m.isWalkableAt(k,l+e)&&(n.push([k,l+e]),m.isWalkableAt(k+1,l)||n.push([k+1,l+e]),m.isWalkableAt(k-1,l)||n.push([k-1,l+e])):m.isWalkableAt(k+d,l)&&(n.push([k+d,l]),m.isWalkableAt(k,l+1)||n.push([k+d,l+1]),m.isWalkableAt(k,l-1)||n.push([k+d,l-1]));else for(f=m.getNeighbors(a,!0),h=0,i=f.length;i>h;++h)g=f[h],n.push([g.x,g.y]);return n},b.exports=c},{"../core/Heuristic":5,"../core/Util":7,heap:1}],18:[function(a,b){function c(a){e.call(this,a),a=a||{},this.heuristic=a.heuristic||d.manhattan}var d=a("../core/Heuristic"),e=a("./JumpPointFinder");c.prototype=new e,c.prototype.constructor=c,c.prototype._jump=function(a,b,c,d){var e=this.grid,f=a-c,g=b-d;if(!e.isWalkableAt(a,b))return null;if(this.trackJumpRecursion===!0&&(e.getNodeAt(a,b).tested=!0),e.getNodeAt(a,b)===this.endNode)return[a,b];if(0!==f){if(e.isWalkableAt(a,b-1)&&!e.isWalkableAt(a-f,b-1)||e.isWalkableAt(a,b+1)&&!e.isWalkableAt(a-f,b+1))return[a,b]}else{if(0===g)throw new Error("Only horizontal and vertical movements are allowed");if(e.isWalkableAt(a-1,b)&&!e.isWalkableAt(a-1,b-g)||e.isWalkableAt(a+1,b)&&!e.isWalkableAt(a+1,b-g))return[a,b];if(this._jump(a+1,b,a,b)||this._jump(a-1,b,a,b))return[a,b]}return this._jump(a+f,b+g,a,b)},c.prototype._findNeighbors=function(a){var b,c,d,e,f,g,h,i,j=a.parent,k=a.x,l=a.y,m=this.grid,n=[];if(j)b=j.x,c=j.y,d=(k-b)/Math.max(Math.abs(k-b),1),e=(l-c)/Math.max(Math.abs(l-c),1),0!==d?(m.isWalkableAt(k,l-1)&&n.push([k,l-1]),m.isWalkableAt(k,l+1)&&n.push([k,l+1]),m.isWalkableAt(k+d,l)&&n.push([k+d,l])):0!==e&&(m.isWalkableAt(k-1,l)&&n.push([k-1,l]),m.isWalkableAt(k+1,l)&&n.push([k+1,l]),m.isWalkableAt(k,l+e)&&n.push([k,l+e]));else for(f=m.getNeighbors(a,!1),h=0,i=f.length;i>h;++h)g=f[h],n.push([g.x,g.y]);return n},b.exports=c},{"../core/Heuristic":5,"./JumpPointFinder":17}],19:[function(a,b){function c(a){a=a||{},this.allowDiagonal=a.allowDiagonal,this.dontCrossCorners=a.dontCrossCorners,this.heuristic=a.heuristic||f.manhattan}var d=a("heap"),e=a("../core/Util"),f=a("../core/Heuristic");c.prototype.findPath=function(a,b,c,f,g){var h,i,j,k,l,m,n,o,p=new d(function(a,b){return a.f-b.f}),q=g.getNodeAt(a,b),r=g.getNodeAt(c,f),s=this.heuristic,t=this.allowDiagonal,u=this.dontCrossCorners,v=Math.abs,w=Math.SQRT2;for(q.g=0,q.f=0,p.push(q),q.opened=!0;!p.empty();){if(h=p.pop(),h.closed=!0,h===r)return e.backtrace(r);i=g.getNeighbors(h,t,u);var x=i.length;for(k=0,l=i.length;l>k;++k)j=i[k],j.closed||(m=j.x,n=j.y,o=h.g+(0===m-h.x||0===n-h.y?1:w),(!j.opened||o<j.g)&&(j.g=o*x/9,j.h=j.h||s(v(m-c),v(n-f)),j.f=j.g+j.h,j.parent=h,j.opened?p.updateItem(j):(p.push(j),j.opened=!0)))}return[]},b.exports=c},{"../core/Heuristic":5,"../core/Util":7,heap:1}]},{},[3])(3)})}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a){"use strict";window.Settings={},window.QueryString=function(){for(var a={},b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if("undefined"==typeof a[e[0]])a[e[0]]=e[1];else if("string"==typeof a[e[0]]){var f=[a[e[0]],e[1]];a[e[0]]=f}else a[e[0]].push(e[1])}return a}();var b=a("./core/game.js");Settings={tick:200,size:Math.ceil(window.innerWidth/80),maxSize:8,width:80,height:45},Settings.updateSize=function(){Settings.size=Math.ceil(window.innerWidth/80),b.canvas.width=Settings.size*Settings.width,b.canvas.height=Settings.size*Settings.height,console.log("Size updated...",Settings.size)},window.document.title+=" "+Settings.seed,console.log("%c%c background: #222; color: #bada55","background: #222; color: #bada55"),b.start()},{"./core/game.js":4}],3:[function(a,b){"use strict";function c(a,b){return Math.floor(Math.random()*(b-a+1))+a}var d={};d.createNew=function(a,b,c){var d=Object.keys(Game.entityMap).length,e=b[0],f=b[1];return-1===Game.map[e][f]?(a.coordinates=[e,f],Game.entityMap[d]=a,Game.map[e][f]=d,c(d)):c(!1)},d.remove=function(a){var b=a[0],c=a[1];if(-1!==Game.map[b][c]){var d=Game.map[b][c];console.log("removed",d,[b,c]),Game.entityMap[d]={deleted:!0},Game.map[b][c]=-1}},d.spawn=function(a,b){function e(a){a&&(f+=1)}b=b||{};for(var f=0;1>f;){var g=c(0,79),h=c(0,44);d.createNew({type:a,data:b},[g,h],e)}},d.populate=function(a,b,e){function f(a){a&&(g+=1)}for(var g=0;e>g;){var h=c(0,79),i=c(0,44);d.createNew({type:a,data:b},[h,i],f)}},d.MoveLeft=function(a){this.MoveEntity(-1,0,a)},d.MoveUp=function(a){this.MoveEntity(0,-1,a)},d.MoveRight=function(a){this.MoveEntity(1,0,a)},d.MoveDown=function(a){this.MoveEntity(0,1,a)},d.MoveEntity=function(a,b,c){if(Game._interval&&"paused"!==Game.status){var d=Game.entityMap[c],e=d.coordinates;Game.map[e[0]][e[1]]=-1;var f=Game.map[e[0]+a][e[1]+b];console.log(f,Game.entityMap[f]),console.log(e),0<=e[0]+a&&0<=e[1]+b&&(-1===f||"block"!==Game.entityMap[f].type)&&(f=c,d.coordinates=[e[0]+a,e[1]+b])}},b.exports=d},{}],4:[function(a,b){"use strict";window.Game={};var c=a("./map.js"),d=a("./entities.js"),e=(a("../input/keypress.js"),a("../ai/pathfinding.js")),f=a("./seedrandom.js");Game={map:[],entityMap:{},version:2,state:"paused",seed:Math.ceil(Math.random()*Date.now()).toString(36).substring(0,8),selected:"block",input:new window.keypress.Listener},Game.init=function(){function a(a){var b=a.x,c=a.y;b-=Game.canvas.offsetLeft,c-=Game.canvas.offsetTop;var d=[Math.floor(b/Settings.size),Math.floor(c/Settings.size)];return console.log(a.type,[b,c],d),d}this.loops=0;var b=Game.input,g=new e.AStarFinder;b.simple_combo("shift d",function(){gui.Window.get().showDevTools()}),b.simple_combo("shift r",function(){var a=new e.Grid(Settings.width,Settings.height),b=g.findPath(1,2,4,2,a);for(var c in b)console.log(b[c])}),b.simple_combo("shift s",function(){var a=document.getElementById("stats").style.display;console.log(a),document.getElementById("stats").style.display=a&&"none"!==a?"none":"block"}),f(this.seed,{global:!0}),Settings.size>Settings.maxSize&&(Settings.size=Settings.maxSize),Game.canvas=document.getElementById("game"),Game.canvas.width=Settings.size*Settings.width,Game.canvas.height=Settings.size*Settings.height,Game.ctx=Game.canvas.getContext("2d"),Game.canvas.addEventListener("mousedown",function(b){b.preventDefault();var c=a(b);d.createNew({type:Game.selected,data:{},coordinates:c},c,function(a){a?console.log("created",a,c):console.log("unable to create")})},!1),Game.canvas.oncontextmenu=function(b){b.preventDefault();var c=a(b),e=c[0],f=c[1];d.remove([e,f])},$(document).keydown(function(a){switch(a.keyCode){case 37:d.MoveLeft(0);break;case 38:d.MoveUp(0);break;case 39:d.MoveRight(0);break;case 40:d.MoveDown(0)}}),c.init(),d.spawn("player"),d.populate("beast",{},1),d.populate("block",{},100),console.log("Game initialized...")},Game.update=function(){window.stats.update()},Game.draw=function(){var a=Object.keys(Game.entityMap).length,b=Settings.size;Game.canvas.width=Game.canvas.width;for(var c=0;a>c;c++){var d=Game.entityMap[c];if(!d.deleted){var e=d.coordinates[0],f=d.coordinates[1],g=d.type;switch(g){case"player":Game.ctx.fillStyle="rgba(255,255, 255, 1)";break;case"npc":Game.ctx.fillStyle="rgba(0, 255, 0, 1)";break;case"beast":Game.ctx.fillStyle="rgba(255, 0, 0, 1)";break;case"liquid":Game.ctx.fillStyle="rgba(0, 0, 255, 1)";break;default:Game.ctx.fillStyle="rgba(128, 128, 128, 1)"}Game.ctx.fillRect(e*b,f*b,1*b,1*b)}}},Game.pause=function(){Game.state="paused",console.log(Game.state),clearInterval(Game._interval)},Game.resume=function(){Game.state="running",console.log(Game.state),Game._interval=setInterval(Game.run,1e3/Settings.tick)},Game.start=function(){Game.state="running",console.log(Game.state),Game._interval=setInterval(Game.run,1e3/Settings.tick)},Game.clearScreen=function(){Game.canvas.width=Game.canvas.width,clearInterval(Game._interval),Game.map=[],Game.entityMap={}},Game.reset=function(){Game.canvas.width=Game.canvas.width,Game.map=[],Game.entityMap={},Game.start()},Game.run=function(){Game.map.length?(Game.update(),Game.draw()):Game.init()},b.exports=Game},{"../ai/pathfinding.js":1,"../input/keypress.js":7,"./entities.js":3,"./map.js":5,"./seedrandom.js":6}],5:[function(a,b){"use strict";var c=function(){this.initialized=!1};c.prototype={init:function(){for(var a=0;79>=a;a++){for(var b=[],c=0;44>=c;c++)b.push(-1);Game.map.push(b)}this.initialized=!0,console.log("Map initialized...")},span:function(a,b){Game.map;switch(a){case"up":a=[0,-b];break;case"down":a=[0,b];break;case"left":a=[-b,0];break;case"right":a=[b,0]}console.log(a)}},b.exports=new c},{}],6:[function(a,b){!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\x00"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[];f=1==f?{entropy:!0}:f||{};var r=l(k(f.entropy?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(f.pass||g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,"global"in f?f.global:this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof b&&b,"function"==typeof define&&define,"random")},{}],7:[function(){(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v={}.hasOwnProperty,w=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};i={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1},t=["meta","alt","option","ctrl","shift","cmd"],r="ctrl",b={},b.debug=!1,a=function(){function a(a){var b,c;for(b in a)v.call(a,b)&&(c=a[b],c!==!1&&(this[b]=c));this.keys=this.keys||[],this.count=this.count||0}return a.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},a.prototype.reset=function(){return this.count=0,this.keyup_fired=null},a}(),b.Listener=function(){function b(a,b){var c,d,e;this.should_suppress_event_defaults=!1,this.should_force_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=b||{};for(d in i)v.call(i,d)&&(e=i[d],this._defaults[d]=this._defaults[d]||e);a=a||document.body,c=function(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0},c(a,"keydown",function(a){return function(b){return b=b||window.event,a._receive_input(b,!0),a._bug_catcher(b)}}(this)),c(a,"keyup",function(a){return function(b){return b=b||window.event,a._receive_input(b,!1)}}(this)),c(window,"blur",function(a){return function(){var b,c,d,e;for(e=a._keys_down,c=0,d=e.length;d>c;c++)b=e[c],a._key_up(b,{});return a._keys_down=[]}}(this))}return b.prototype._bug_catcher=function(a){var b;return"cmd"===r&&w.call(this._keys_down,"cmd")>=0&&"cmd"!==(b=f(a.keyCode))&&"shift"!==b&&"alt"!==b&&"caps"!==b&&"tab"!==b?this._receive_input(a,!1):void 0},b.prototype._cmd_bug_check=function(a){return"cmd"===r&&w.call(this._keys_down,"cmd")>=0&&w.call(a,"cmd")<0?!1:!0},b.prototype._prevent_default=function(a,b){return(b||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation)?a.stopPropagation():void 0},b.prototype._get_active_combos=function(a){var b,c;return b=[],c=j(this._keys_down,function(b){return b!==a}),c.push(a),this._match_combo_arrays(c,function(a){return function(c){return a._cmd_bug_check(c.keys)?b.push(c):void 0}}(this)),this._fuzzy_match_combo_arrays(c,function(a){return function(c){return w.call(b,c)>=0?void 0:!c.is_solitary&&a._cmd_bug_check(c.keys)?b.push(c):void 0}}(this)),b},b.prototype._get_potential_combos=function(a){var b,c,d,e,f;for(c=[],f=this._registered_combos,d=0,e=f.length;e>d;d++)b=f[d],b.is_sequence||w.call(b.keys,a)>=0&&this._cmd_bug_check(b.keys)&&c.push(b);return c},b.prototype._add_to_active_combos=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(i=!1,h=!0,e=!1,w.call(this._active_combos,a)>=0)return!0;if(this._active_combos.length)for(g=j=0,o=this._active_combos.length;o>=0?o>j:j>o;g=o>=0?++j:--j)if(b=this._active_combos[g],b&&b.is_exclusive&&a.is_exclusive){if(d=b.keys,!i)for(k=0,m=d.length;m>k;k++)if(c=d[k],i=!0,w.call(a.keys,c)<0){i=!1;break}if(h&&!i)for(p=a.keys,l=0,n=p.length;n>l;l++)if(f=p[l],h=!1,w.call(d,f)<0){h=!0;break}i&&(e?(b=this._active_combos.splice(g,1)[0],null!=b&&b.reset()):(b=this._active_combos.splice(g,1,a)[0],null!=b&&b.reset(),e=!0),h=!1)}return h&&this._active_combos.unshift(a),i||h},b.prototype._remove_from_active_combos=function(a){var b,c,d,e;for(c=d=0,e=this._active_combos.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(b=this._active_combos[c],b===a){a=this._active_combos.splice(c,1)[0],a.reset();break}},b.prototype._get_possible_sequences=function(){var a,b,c,d,e,f,g,h,i,k,l,m,n;for(e=[],l=this._registered_combos,g=0,k=l.length;k>g;g++)for(a=l[g],c=h=1,m=this._sequence.length;m>=1?m>=h:h>=m;c=m>=1?++h:--h)if(f=this._sequence.slice(-c),a.is_sequence&&(!(w.call(a.keys,"shift")<0)||(f=j(f,function(a){return"shift"!==a}),f.length))){for(b=i=0,n=f.length;n>=0?n>i:i>n;b=n>=0?++i:--i){if(a.keys[b]!==f[b]){d=!1;break}d=!0}d&&e.push(a)}return e},b.prototype._add_key_to_sequence=function(a,b){var c,d,e,f;if(this._sequence.push(a),d=this._get_possible_sequences(),d.length){for(e=0,f=d.length;f>e;e++)c=d[e],this._prevent_default(b,c.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),this.sequence_delay>-1&&(this._sequence_timer=setTimeout(function(){return this._sequence=[]},this.sequence_delay))}else this._sequence=[]},b.prototype._get_sequence=function(a){var b,c,d,e,f,g,h,i,k,l,m,n,o;for(m=this._registered_combos,h=0,l=m.length;l>h;h++)if(b=m[h],b.is_sequence){for(d=i=1,n=this._sequence.length;n>=1?n>=i:i>=n;d=n>=1?++i:--i)if(g=j(this._sequence,function(a){return w.call(b.keys,"shift")>=0?!0:"shift"!==a}).slice(-d),b.keys.length===g.length)for(c=k=0,o=g.length;o>=0?o>k:k>o;c=o>=0?++k:--k)if(f=g[c],!(w.call(b.keys,"shift")<0&&"shift"===f||"shift"===a&&w.call(b.keys,"shift")<0)){if(b.keys[c]!==f){e=!1;break}e=!0}if(e)return b}return!1},b.prototype._receive_input=function(a,b){var c;return this._prevent_capture?void(this._keys_down.length&&(this._keys_down=[])):(c=f(a.keyCode),(b||this._keys_down.length||"alt"!==c&&c!==r)&&c?b?this._key_down(c,a):this._key_up(c,a):void 0)},b.prototype._fire=function(a,b,c,d){return"function"==typeof b["on_"+a]&&this._prevent_default(c,b["on_"+a].call(b["this"],c,b.count,d)!==!0),"release"===a&&(b.count=0),"keyup"===a?b.keyup_fired=!0:void 0},b.prototype._match_combo_arrays=function(a,b){var c,f,g,h;for(h=this._registered_combos,f=0,g=h.length;g>f;f++)c=h[f],(!c.is_unordered&&e(a,c.keys)||c.is_unordered&&d(a,c.keys))&&b(c)},b.prototype._fuzzy_match_combo_arrays=function(a,b){var c,d,e,f;for(f=this._registered_combos,d=0,e=f.length;e>d;d++)c=f[d],(!c.is_unordered&&l(c.keys,a)||c.is_unordered&&k(c.keys,a))&&b(c)
},b.prototype._keys_remain=function(a){var b,c,d,e,f;for(f=a.keys,d=0,e=f.length;e>d;d++)if(b=f[d],w.call(this._keys_down,b)>=0){c=!0;break}return c},b.prototype._key_down=function(a,b){var c,d,e,f,h,i,j,k,l,m,n,o,p,q,t;l=g(a,b),l&&(a=l),this._add_key_to_sequence(a,b),k=this._get_sequence(a),k&&this._fire("keydown",k,b);for(h in s)e=s[h],b[e]&&(h===a||w.call(this._keys_down,h)>=0||this._keys_down.push(h));for(h in s)if(e=s[h],h!==a&&w.call(this._keys_down,h)>=0&&!b[e]){if("cmd"===h&&"cmd"!==r)continue;for(f=m=0,t=this._keys_down.length;t>=0?t>m:m>t;f=t>=0?++m:--m)this._keys_down[f]===h&&this._keys_down.splice(f,1)}for(d=this._get_active_combos(a),j=this._get_potential_combos(a),n=0,p=d.length;p>n;n++)c=d[n],this._handle_combo_down(c,j,a,b);if(j.length)for(o=0,q=j.length;q>o;o++)i=j[o],this._prevent_default(b,i.prevent_default);w.call(this._keys_down,a)<0&&this._keys_down.push(a)},b.prototype._handle_combo_down=function(a,b,c,d){var e,f,g,h,i,j;if(w.call(a.keys,c)<0)return!1;if(this._prevent_default(d,a&&a.prevent_default),e=!1,w.call(this._keys_down,c)>=0&&(e=!0,!a.allows_key_repeat()))return!1;if(h=this._add_to_active_combos(a,c),a.keyup_fired=!1,f=!1,a.is_exclusive)for(i=0,j=b.length;j>i;i++)if(g=b[i],g.is_exclusive&&g.keys.length>a.keys.length){f=!0;break}return!f&&(a.is_counting&&"function"==typeof a.on_keydown&&(a.count+=1),h)?this._fire("keydown",a,d,e):void 0},b.prototype._key_up=function(a,b){var c,d,e,f,h,i,j,k,l,m,n,o,q,r,s,t,u,v,x;if(k=a,j=g(a,b),j&&(a=j),j=p[k],b.shiftKey?j&&w.call(this._keys_down,j)>=0||(a=k):k&&w.call(this._keys_down,k)>=0||(a=j),i=this._get_sequence(a),i&&this._fire("keyup",i,b),w.call(this._keys_down,a)<0)return!1;for(h=l=0,t=this._keys_down.length;t>=0?t>l:l>t;h=t>=0?++l:--l)if((u=this._keys_down[h])===a||u===j||u===k){this._keys_down.splice(h,1);break}for(d=this._active_combos.length,f=[],v=this._active_combos,m=0,q=v.length;q>m;m++)c=v[m],w.call(c.keys,a)>=0&&f.push(c);for(n=0,r=f.length;r>n;n++)e=f[n],this._handle_combo_up(e,b,a);if(d>1)for(x=this._active_combos,o=0,s=x.length;s>o;o++)c=x[o],void 0===c||w.call(f,c)>=0||this._keys_remain(c)||this._remove_from_active_combos(c)},b.prototype._handle_combo_up=function(a,b,c){var e,f;this._prevent_default(b,a&&a.prevent_default),f=this._keys_remain(a),a.keyup_fired||(e=this._keys_down.slice(),e.push(c),(!a.is_solitary||d(e,a.keys))&&(this._fire("keyup",a,b),a.is_counting&&"function"==typeof a.on_keyup&&"function"!=typeof a.on_keydown&&(a.count+=1))),f||(this._fire("release",a,b),this._remove_from_active_combos(a))},b.prototype.simple_combo=function(a,b){return this.register_combo({keys:a,on_keydown:b})},b.prototype.counting_combo=function(a,b){return this.register_combo({keys:a,is_counting:!0,is_unordered:!1,on_keydown:b})},b.prototype.sequence_combo=function(a,b){return this.register_combo({keys:a,on_keydown:b,is_sequence:!0})},b.prototype.register_combo=function(b){var c,d,e,f;"string"==typeof b.keys&&(b.keys=b.keys.split(" ")),f=this._defaults;for(d in f)v.call(f,d)&&(e=f[d],void 0===b[d]&&(b[d]=e));return c=new a(b),u(c)?(this._registered_combos.push(c),c):void 0},b.prototype.register_many=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.register_combo(b));return e},b.prototype.unregister_combo=function(a){var b,c,f,g,h;if(!a)return!1;if(c=function(a){return function(b){var c,d,e,f;for(f=[],c=d=0,e=a._registered_combos.length;e>=0?e>d:d>e;c=e>=0?++d:--d){if(b===a._registered_combos[c]){a._registered_combos.splice(c,1);break}f.push(void 0)}return f}}(this),a.keys)return c(a);for(h=this._registered_combos,f=0,g=h.length;g>f;f++){b=h[f]}return"string"==typeof a&&(a=a.split(" ")),b.is_unordered&&d(a,b.keys)||!b.is_unordered&&e(a,b.keys)?c(b):void 0},b.prototype.unregister_many=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.unregister_combo(b));return e},b.prototype.get_registered_combos=function(){return this._registered_combos},b.prototype.reset=function(){return this._registered_combos=[]},b.prototype.listen=function(){return this._prevent_capture=!1},b.prototype.stop_listening=function(){return this._prevent_capture=!0},b.prototype.get_meta_key=function(){return r},b}(),h=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(r="cmd")},c=function(){-1!==navigator.userAgent.indexOf("Opera")&&(o[17]="cmd")},f=function(a){return o[a]},j=function(a,b){var c;return a.filter?a.filter(b):function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],b(c)&&f.push(c);return f}()},d=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(d=0,e=a.length;e>d;d++)if(c=a[d],!(w.call(b,c)>=0))return!1;return!0},e=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=d=0,e=a.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(a[c]!==b[c])return!1;return!0},k=function(a,b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],w.call(b,c)<0)return!1;return!0},l=function(a,b){var c,d,e,f,g;for(e=0,f=0,g=a.length;g>f;f++){if(d=a[f],c=b.indexOf(d),!(c>=e))return!1;e=c}return!0},q=function(){return b.debug?console.log.apply(console,arguments):void 0},m=function(a){var b,c,d;b=!1;for(d in o)if(c=o[d],a===c){b=!0;break}if(!b)for(d in p)if(c=p[d],a===c){b=!0;break}return b},u=function(a){var b,c,d,e,f,g,h,j,k,l,o,p,s,u,v;for(h=!0,a.keys.length||q("You're trying to bind a combo with no keys:",a),c=k=0,u=a.keys.length;u>=0?u>k:k>u;c=u>=0?++k:--k)d=a.keys[c],b=n[d],b&&(d=a.keys[c]=b),"meta"===d&&a.keys.splice(c,1,r),"cmd"===d&&q('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(v=a.keys,l=0,p=v.length;p>l;l++)d=v[l],m(d)||(q('Do not recognize the key "'+d+'"'),h=!1);if(w.call(a.keys,"meta")>=0||w.call(a.keys,"cmd")>=0){for(f=a.keys.slice(),o=0,s=t.length;s>o;o++)e=t[o],(c=f.indexOf(e))>-1&&f.splice(c,1);f.length>1&&(q("META and CMD key combos cannot have more than 1 non-modifier keys",a,f),h=!1)}for(g in a)j=a[g],"undefined"===i[g]&&q("The property "+g+" is not a valid combo property. Your combo has still been registered.");return h},g=function(a,b){var c;return b.shiftKey?(c=p[a],null!=c?c:!1):!1},s={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},n={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},p={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},o={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num"},h(),c(),"function"==typeof define&&define.amd?define([],function(){return b}):window.keypress=b}).call(this)},{}]},{},[2]);